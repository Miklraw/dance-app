<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>High Heels Elite Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&family=Playfair+Display:ital,wght@0,700;0,900;1,700&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --–∞–∫—Ü–µ–Ω—Ç: #E91E63; --–∑–æ–ª–æ—Ç–æ: #C5A059; --—Ç–µ–º–Ω—ã–π: #0D0D0D; --—Ñ–æ–Ω: #0D0D0D; --—Å—Ç–µ–∫–ª–æ: rgba(255, 255, 255, 0.07); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { background: var(--—Ñ–æ–Ω); color: white; font-family: 'Montserrat', sans-serif; padding-bottom: 110px; }
        
        /* –°—Ç–∏–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        header { padding: 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; background: rgba(13,13,13,0.9); backdrop-filter: blur(15px); }
        .–ª–æ–≥–æ { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 900; }
        .tab-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 90px; background: rgba(13,13,13,0.95); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid rgba(255,255,255,0.1); z-index: 2000; padding-bottom: env(safe-area-inset-bottom); }
        .tab-item { display: flex; flex-direction: column; align-items: center; color: #666; font-size: 10px; font-weight: 700; flex: 1; }
        .tab-item.active { color: var(--–∞–∫—Ü–µ–Ω—Ç); }
        .scan-btn { width: 60px; height: 60px; background: var(--–∞–∫—Ü–µ–Ω—Ç); border-radius: 50%; display: flex; align-items: center; justify-content: center; transform: translateY(-20px); border: 4px solid var(--—Ñ–æ–Ω); box-shadow: 0 10px 20px rgba(233,30,99,0.3); }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ –±–ª–æ–∫–∏ */
        .—Å—Ç—Ä–∞–Ω–∏—Ü–∞ { display: none; padding: 15px; animation: fadeIn 0.4s ease; }
        .—Å—Ç—Ä–∞–Ω–∏—Ü–∞.–∞–∫—Ç–∏–≤–Ω–∞ { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .–±–ª–æ–∫ { background: var(--—Å—Ç–µ–∫–ª–æ); border-radius: 25px; padding: 20px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.05); backdrop-filter: blur(10px); }
        .card-status { background: linear-gradient(135deg, #1a1a1a, #0d0d0d); border-radius: 30px; padding: 25px; position: relative; overflow: hidden; border: 1px solid rgba(197,160,89,0.2); }
        .gold-aura { border-color: var(--–∑–æ–ª–æ—Ç–æ); box-shadow: 0 0 25px rgba(197,160,89,0.15); }
        
        /* –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–∞ */
        .elite-box { background: linear-gradient(45deg, var(--–∑–æ–ª–æ—Ç–æ), #8e6d2f); border-radius: 20px; padding: 15px; text-align: center; margin-bottom: 20px; cursor: pointer; animation: float 3s infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .poll-option { background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px; margin-top: 10px; display: flex; justify-content: space-between; font-size: 13px; }
        .poll-option.selected { border: 1px solid var(--–∞–∫—Ü–µ–Ω—Ç); background: rgba(233,30,99,0.1); }

        /* –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å */
        .admin-only { display: none; }
        body.is-admin .admin-only { display: block; }
        .student-row { display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .present-btn { padding: 6px 12px; border-radius: 8px; border: none; font-weight: 800; font-size: 10px; }
        .present-btn.off { background: #333; color: #777; }
        .present-btn.on { background: #4CAF50; color: white; }
    </style>
</head>
<body id="main-body">

<header>
    <div class="–ª–æ–≥–æ">ELITE <span style="color:var(--–∞–∫—Ü–µ–Ω—Ç)">HUB</span></div>
    <div id="streak-info" style="color:var(--–∑–æ–ª–æ—Ç–æ); font-weight:800; font-size:12px;">üî• 3 –î–ù–Ø</div>
</header>

<div id="–≥–ª–∞–≤–Ω–∞—è" class="—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–∫—Ç–∏–≤–Ω–∞">
    <div id="main-card" class="card-status">
        <p style="font-size:10px; opacity:0.5; letter-spacing:1px;">–í–ê–® –†–ê–ù–ì</p>
        <h2 id="status-name" style="font-family:'Playfair Display'; font-size:28px; color:var(--–∑–æ–ª–æ—Ç–æ); margin: 5px 0;">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
        <div style="height:5px; background:rgba(255,255,255,0.1); border-radius:10px; margin: 15px 0;">
            <div id="xp-bar" style="height:100%; background:var(--–∞–∫—Ü–µ–Ω—Ç); width:0%; transition:1.5s;"></div>
        </div>
        <p id="xp-label" style="font-size:10px; opacity:0.7;">0 / 100 XP</p>
    </div>

    <div id="daily-box" class="elite-box" onclick="openBox()">
        <span style="font-size:20px;">üéÅ</span> <b style="font-size:12px;">ELITE BOX –î–û–°–¢–£–ü–ï–ù</b>
    </div>

    <div class="admin-only –±–ª–æ–∫" style="border:1px solid var(--–∑–æ–ª–æ—Ç–æ)">
        <p style="font-size:11px; color:var(--–∑–æ–ª–æ—Ç–æ); font-weight:800; margin-bottom:10px;">COACH PANEL</p>
        <button onclick="coachReward(50)" style="width:100%; padding:12px; border-radius:12px; background:white; color:black; border:none; font-weight:800; font-size:12px;">+50 XP –í–°–ï–ô –ì–†–£–ü–ü–ï</button>
    </div>

    <div class="–±–ª–æ–∫">
        <h4 style="font-size:13px; margin-bottom:10px;">–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ —Ç—Ä–µ–∫:</h4>
        <div class="poll-option" onclick="vote(this)"><span>Beyonc√© - Energy</span><span>40%</span></div>
        <div class="poll-option" onclick="vote(this)"><span>Rihanna - S&M</span><span>60%</span></div>
    </div>
</div>

<div id="–∂—É—Ä–Ω–∞–ª" class="—Å—Ç—Ä–∞–Ω–∏—Ü–∞">
    <h2 style="font-family:'Playfair Display'; margin-bottom:20px;">–ñ—É—Ä–Ω–∞–ª –≥—Ä—É–ø–ø—ã</h2>
    <div class="–±–ª–æ–∫" id="students-list">
        </div>
</div>

<div id="—Ä–µ–π—Ç–∏–Ω–≥" class="—Å—Ç—Ä–∞–Ω–∏—Ü–∞">
    <h2 style="font-family:'Playfair Display'; margin-bottom:20px;">Elite Chart</h2>
    <div id="leaderboard"></div>
</div>

<div id="–ø—Ä–æ—Ñ–∏–ª—å" class="—Å—Ç—Ä–∞–Ω–∏—Ü–∞">
    <div style="text-align:center; padding:20px;">
        <div id="big-ava" style="width:100px; height:100px; border-radius:35px; margin:0 auto 15px; background-size:cover; border:3px solid var(--–∑–æ–ª–æ—Ç–æ);"></div>
        <h2 id="user-name" style="font-family:'Playfair Display';">–î–∏–≤–∞</h2>
        <p id="user-rank-label" style="color:var(--–∑–æ–ª–æ—Ç–æ); font-size:11px; font-weight:800; margin-top:5px;"></p>
    </div>
    <div class="–±–ª–æ–∫" style="display:flex; justify-content:space-around; text-align:center;">
        <div><p style="font-size:10px; opacity:0.5;">–í–°–ï–ì–û XP</p><b id="total-xp-stat" style="font-size:20px; color:var(--–∞–∫—Ü–µ–Ω—Ç);">0</b></div>
        <div><p style="font-size:10px; opacity:0.5;">–°–¢–†–ò–ö</p><b style="font-size:20px;">3 –¥–Ω—è</b></div>
    </div>
</div>

<div class="tab-bar">
    <div class="tab-item active" onclick="–ø–µ—Ä–µ–π—Ç–∏('–≥–ª–∞–≤–Ω–∞—è', this)"><span>üè†</span><span>–ì–ª–∞–≤–Ω–∞—è</span></div>
    <div class="tab-item" onclick="–ø–µ—Ä–µ–π—Ç–∏('—Ä–µ–π—Ç–∏–Ω–≥', this)"><span>üèÜ</span><span>–¢–æ–ø</span></div>
    <div class="scan-btn" onclick="scanQR()">üì∑</div>
    <div class="tab-item admin-only" onclick="–ø–µ—Ä–µ–π—Ç–∏('–∂—É—Ä–Ω–∞–ª', this)"><span>üìã</span><span>–ñ—É—Ä–Ω–∞–ª</span></div>
    <div class="tab-item" onclick="–ø–µ—Ä–µ–π—Ç–∏('–ø—Ä–æ—Ñ–∏–ª—å', this)"><span>üë§</span><span>–ü—Ä–æ—Ñ–∏–ª—å</span></div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready(); tg.expand();

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
    const ADMIN_IDS = [123456789, 7461427508]; // –î–æ–±–∞–≤—å —Å–≤–æ–π ID —Å—é–¥–∞
    const –°–¢–ê–¢–£–°–´ = ["–î–µ–±—é—Ç–∞–Ω—Ç–∫–∞", "–£—á–µ–Ω–∏—Ü–∞", "–ì—Ä–∞—Ü–∏—è", "–≠—Å—Ç–µ—Ç–∏–∫–∞", "–ú—É–∑–∞", "–ê–º–±–∞—Å—Å–∞–¥–æ—Ä", "–ó–≤–µ–∑–¥–∞", "–ü—Ä–µ–º–∏—É–º –î–∏–≤–∞", "–ü–ª–∞—Ç–∏–Ω–æ–≤–∞—è –î–∏–≤–∞", "–ò–∫–æ–Ω–∞ –≠–ª–∏—Ç"];
    
    let state = { 
        xp: parseInt(localStorage.getItem('hhe_xp')) || 0, 
        name: tg.initDataUnsafe.user?.first_name || "–î–∏–≤–∞",
        id: tg.initDataUnsafe.user?.id
    };

    const MOCK_STUDENTS = [
        {id: 101, name: "–ê–ª–∏–Ω–∞", xp: 450, present: false},
        {id: 102, name: "–ö—Ä–∏—Å—Ç–∏–Ω–∞", xp: 1200, present: true},
        {id: 103, name: "–í–∏–∫—Ç–æ—Ä–∏—è", xp: 80, present: false}
    ];

    function render() {
        const idx = Math.min(Math.floor(state.xp / 100), 9);
        const curLevelXP = state.xp % 100;

        // –ì–ª–∞–≤–Ω–∞—è
        document.getElementById('status-name').innerText = –°–¢–ê–¢–£–°–´[idx];
        document.getElementById('xp-bar').style.width = curLevelXP + '%';
        document.getElementById('xp-label').innerText = `${curLevelXP} / 100 XP`;
        
        // –ü—Ä–æ—Ñ–∏–ª—å
        const img = `https://ui-avatars.com/api/?name=${state.name}&background=E91E63&color=fff`;
        document.getElementById('big-ava').style.backgroundImage = `url(${img})`;
        document.getElementById('user-name').innerText = state.name;
        document.getElementById('user-rank-label').innerText = –°–¢–ê–¢–£–°–´[idx].toUpperCase();
        document.getElementById('total-xp-stat').innerText = state.xp;

        if (idx >= 5) document.getElementById('main-card').classList.add('gold-aura');

        updateLeaderboard();
        renderJournal();
    }

    function renderJournal() {
        const list = document.getElementById('students-list');
        list.innerHTML = MOCK_STUDENTS.map(s => `
            <div class="student-row">
                <div style="font-size:13px;"><b>${s.name}</b><br><small style="opacity:0.5">${s.xp} XP</small></div>
                <button class="present-btn ${s.present?'on':'off'}" onclick="toggleStudent(${s.id})">
                    ${s.present?'–ó–î–ï–°–¨':'–û–¢–°–£–¢–°–¢–í–£–ï–¢'}
                </button>
            </div>
        `).join('');
    }

    function toggleStudent(id) {
        const s = MOCK_STUDENTS.find(x => x.id === id);
        s.present = !s.present;
        tg.HapticFeedback.impactOccurred('light');
        renderJournal();
    }

    function openBox() {
        if(localStorage.getItem('hhe_box_day') == new Date().getDate()) {
            tg.showAlert("Elite Box —É–∂–µ –æ—Ç–∫—Ä—ã—Ç! –ñ–¥–µ–º —Ç–µ–±—è –∑–∞–≤—Ç—Ä–∞. ‚ú®");
            return;
        }
        state.xp += 20;
        localStorage.setItem('hhe_xp', state.xp);
        localStorage.setItem('hhe_box_day', new Date().getDate());
        confetti({ particleCount: 100, spread: 70, colors: ['#C5A059', '#E91E63'] });
        tg.showAlert("–¢–≤–æ–π –ø–æ–¥–∞—Ä–æ–∫: +20 XP –∑–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç—å!");
        render();
    }

    function vote(el) {
        document.querySelectorAll('.poll-option').forEach(o => o.classList.remove('selected'));
        el.classList.add('selected');
        tg.HapticFeedback.impactOccurred('medium');
    }

    function –ø–µ—Ä–µ–π—Ç–∏(id, el) {
        document.querySelectorAll('.—Å—Ç—Ä–∞–Ω–∏—Ü–∞').forEach(s => s.classList.remove('–∞–∫—Ç–∏–≤–Ω–∞'));
        document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('–∞–∫—Ç–∏–≤–Ω–∞');
        if(el) el.classList.add('active');
        tg.HapticFeedback.selectionChanged();
    }

    function coachReward(p) {
        state.xp += p;
        localStorage.setItem('hhe_xp', state.xp);
        confetti({ particleCount: 150, origin: { y: 0.8 } });
        render();
        tg.showAlert("–í—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞—á–∏—Å–ª–∏–ª–∏ –±–∞–ª–ª—ã –≤—Å–µ–π –≥—Ä—É–ø–ø–µ!");
    }

    function scanQR() {
        tg.showScanQrPopup({ text: "–ß–µ–∫–∏–Ω High Heels Elite" }, (text) => {
            if (text.includes("HHE_XP_")) {
                const p = parseInt(text.split("_")[2]);
                state.xp += p;
                localStorage.setItem('hhe_xp', state.xp);
                render();
                tg.closeScanQrPopup();
            }
        });
    }

    function updateLeaderboard() {
        const list = document.getElementById('leaderboard');
        const leaders = [{n: "–ï–ª–µ–Ω–∞ ‚ú®", x: 5000}, {n: state.name, x: state.xp, me: true}, {n: "–ú–∞—Ä–∏—è", x: 920}].sort((a,b) => b.x - a.x);
        list.innerHTML = leaders.map((u, i) => `
            <div class="–±–ª–æ–∫" style="display:flex; justify-content:space-between; padding:15px; margin-bottom:10px; ${u.me?'border:1px solid var(--–∞–∫—Ü–µ–Ω—Ç)':''}">
                <span>#${i+1} ${u.n}</span><b>${u.x} XP</b>
            </div>
        `).join('');
    }

    if(ADMIN_IDS.includes(state.id)) document.body.classList.add('is-admin');
    render();
</script>
</body>
</html>
